{"ast":null,"code":"import _objectSpread from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/src/Containers/PerfumePage.js\";\nimport React, { Component } from 'react';\nimport PerfumeContainer from './PerfumeContainer';\nimport Cart from './Cart';\n\nvar PerfumePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PerfumePage, _Component);\n\n  function PerfumePage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PerfumePage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PerfumePage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      perfumes: [],\n      cartPerfumes: []\n    };\n\n    _this.clickHandler = function (perfume) {\n      _this.setState({\n        cartPerfumes: [].concat(_toConsumableArray(_this.state.cartPerfumes), [perfume])\n      });\n    };\n\n    _this.removeHandler = function (perfume) {\n      var removePerfume = _toConsumableArray(_this.state.cartPerfumes).filter(function (cartPerfume) {\n        return cartPerfume.id !== perfume.id;\n      });\n\n      _this.setState({\n        cartPerfumes: removePerfume\n      });\n    };\n\n    _this.inputHandler = function (e) {\n      _this.setState({\n        searchTerm: e.target.value\n      });\n    };\n\n    _this.submitHandler = function (e, submission) {\n      e.preventDefault();\n      var data = {\n        name: submission.name,\n        rating: submission.rating,\n        review_text: submission.review,\n        perfume_id: submission.perfumeId\n      };\n      var options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      };\n      fetch(\"http://localhost:3001/api/v1/perfumes/\".concat(submission.perfumeId, \"/reviews\"), options).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var perfs = _toConsumableArray(_this.state.perfumes);\n\n        var foundPerf = perfs.find(function (perf) {\n          return perf.id === submission.perfumeId;\n        });\n        var reviews = [].concat(_toConsumableArray(foundPerf.reviews), [data]);\n        foundPerf.reviews = reviews;\n\n        _this.setState({\n          perfumes: perfs\n        });\n      });\n    };\n\n    _this.editSubmitHandler = function (e, editReview) {\n      e.preventDefault();\n      var data = {\n        name: editReview.name,\n        rating: editReview.rating,\n        review_text: editReview.reviewText,\n        perfume_id: editReview.perfumeId\n      };\n      var options = {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      };\n      fetch(\"http://localhost:3001/api/v1/perfumes/\".concat(editReview.perfumeId, \"/reviews/\").concat(editReview.reviewId), options).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        var perfs = _this.state.perfumes.map(function (perfume) {\n          //console.log(this.state.perfumes)\n          if (perfume.id === editReview.perfumeId) {\n            var newReviews = perfume.reviews.map(function (review) {\n              if (review.id === editReview.reviewId) {\n                return data;\n              } else {\n                return review;\n              }\n            });\n            return _objectSpread({}, perfume, {\n              reviews: newReviews\n            });\n          } else {\n            return perfume;\n          }\n        });\n\n        _this.setState({\n          perfumes: perfs\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PerfumePage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch('http://localhost:3001/api/v1/perfumes').then(function (res) {\n        return res.json();\n      }).then(function (perfumes) {\n        return _this2.setState({\n          perfumes: perfumes\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.perfumes);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"landing-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"main-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Eau De\"), React.createElement(\"img\", {\n        className: \"frame\",\n        src: \"./YeroldsFrame.svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        id: \"yerold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Hash Gang\")), React.createElement(\"div\", {\n        className: \"ui grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"twelve wide column grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(PerfumeContainer, {\n        submitHandler: this.submitHandler,\n        clickHandler: this.clickHandler,\n        editSubmitHandler: this.editSubmitHandler,\n        perfumes: this.state.perfumes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"four wide column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Cart, {\n        cartPerfumes: this.state.cartPerfumes,\n        removeHandler: this.removeHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return PerfumePage;\n}(Component);\n\nexport default PerfumePage;","map":{"version":3,"sources":["/Users/flatironschool/Desktop/Access Labs/Mod 4/Week 2/Eau-de-Yerold-frontend/src/Containers/PerfumePage.js"],"names":["React","Component","PerfumeContainer","Cart","PerfumePage","state","perfumes","cartPerfumes","clickHandler","perfume","setState","removeHandler","removePerfume","filter","cartPerfume","id","inputHandler","e","searchTerm","target","value","submitHandler","submission","preventDefault","data","name","rating","review_text","review","perfume_id","perfumeId","options","method","headers","body","JSON","stringify","fetch","then","res","json","perfs","foundPerf","find","perf","reviews","editSubmitHandler","editReview","reviewText","reviewId","map","newReviews","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PerfumeContainer from './PerfumeContainer'\nimport Cart from './Cart'\n\nclass PerfumePage extends Component {\n\n  state = {\n    perfumes: [],\n    cartPerfumes: [],\n  }\n\n    componentDidMount(){\n      fetch('http://localhost:3001/api/v1/perfumes')\n      .then(res => res.json())\n      .then(perfumes => this.setState({\n        perfumes: perfumes\n      }))\n    }\n\n    clickHandler = (perfume) => {\n      this.setState({\n        cartPerfumes: [...this.state.cartPerfumes, perfume]\n      })\n    }\n\n    removeHandler = (perfume) => {\n      let removePerfume = [...this.state.cartPerfumes].filter(cartPerfume => {\n        return cartPerfume.id !== perfume.id\n      })\n\n      this.setState({\n        cartPerfumes: removePerfume\n      })\n    }\n\n    inputHandler = (e) => {\n      this.setState({\n        searchTerm: e.target.value\n      })\n    }\n\n    submitHandler = (e, submission) => {\n      e.preventDefault();\n      let data = {\n        name: submission.name,\n        rating: submission.rating,\n        review_text: submission.review,\n        perfume_id: submission.perfumeId\n      }\n      let options = {\n        method: 'POST',\n        headers: {\n          'Content-Type':'application/json'\n        },\n        body: JSON.stringify(data)\n      }\n      fetch(`http://localhost:3001/api/v1/perfumes/${submission.perfumeId}/reviews`, options)\n      .then(res => res.json())\n      .then(data =>\n        {\n          let perfs = [...this.state.perfumes]\n          let foundPerf = perfs.find(perf => perf.id === submission.perfumeId)\n          let reviews = [...foundPerf.reviews, data]\n          foundPerf.reviews = reviews\n          this.setState({\n            perfumes: perfs\n          })\n        })\n\n    }\n\n    editSubmitHandler = (e, editReview) => {\n      e.preventDefault();\n      let data = {\n        name: editReview.name,\n        rating: editReview.rating,\n        review_text: editReview.reviewText,\n        perfume_id: editReview.perfumeId\n      }\n      let options = {\n        method: 'PATCH',\n        headers: {\n          'Content-Type':'application/json'\n        },\n        body: JSON.stringify(data)\n      }\n      fetch(`http://localhost:3001/api/v1/perfumes/${editReview.perfumeId}/reviews/${editReview.reviewId}`, options)\n      .then(res => res.json())\n      .then(data =>\n        {\n          let perfs = this.state.perfumes.map(perfume => {\n            //console.log(this.state.perfumes)\n            if(perfume.id === editReview.perfumeId){\n              const newReviews = perfume.reviews.map(review => {\n                if(review.id === editReview.reviewId){\n                  return data\n                } else {\n                  return review\n                }\n              })\n              return {...perfume, reviews: newReviews}\n            }\n            else{\n              return perfume\n            }\n          })\n          this.setState({\n            perfumes: perfs\n          })\n         })\n    }\n\n  render() {\n    console.log(this.state.perfumes)\n    return (\n      <div>\n        <div className=\"landing-page\">\n          <h1 className=\"main-title\">Eau De</h1>\n          <img className='frame' src=\"./YeroldsFrame.svg\"/>\n          <h1 id=\"yerold\">Hash Gang</h1>\n        </div>\n        <div className='ui grid'>\n          <div className=\"twelve wide column grid\">\n            <PerfumeContainer submitHandler={this.submitHandler} clickHandler={this.clickHandler} editSubmitHandler={this.editSubmitHandler} perfumes={this.state.perfumes}/>\n          </div>\n          <div className=\"four wide column\">\n            <Cart cartPerfumes={this.state.cartPerfumes} removeHandler={this.removeHandler}/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default PerfumePage;\n"]},"metadata":{},"sourceType":"module"}